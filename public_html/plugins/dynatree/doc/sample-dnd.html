<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
	<title>Dynatree - Example</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
    
    
    
        <script type="text/javascript" src="/js/bootstrap/bootstrap.js"></script>  
    <script type="text/javascript" src="/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/jquery.mousewheel.js"></script>

    <!-- Charts plugins -->
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.js"></script>
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.grow.js"></script>
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.pie.js"></script>
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.resize.js"></script>
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.tooltip_0.4.4.js"></script>
    <script type="text/javascript" src="/plugins/charts/flot/jquery.flot.orderBars.js"></script>
    <script type="text/javascript" src="/plugins/charts/sparkline/jquery.sparkline.min.js"></script><!-- Sparkline plugin -->
    <script type="text/javascript" src="/plugins/charts/knob/jquery.knob.js"></script><!-- Circular sliders and stats -->

    <!-- Misc plugins -->
    <script type="text/javascript" src="/plugins/misc/fullcalendar/fullcalendar.min.js"></script><!-- Calendar plugin -->
    <script type="text/javascript" src="/plugins/misc/qtip/jquery.qtip.min.js"></script><!-- Custom tooltip plugin -->
    <script type="text/javascript" src="/plugins/misc/totop/jquery.ui.totop.min.js"></script> <!-- Back to top plugin -->
    <!-- Search plugin -->
    <script type="text/javascript" src="/plugins/misc/search/tipuesearch_set.js"></script>
    <script type="text/javascript" src="/plugins/misc/search/tipuesearch_data.js"></script><!-- JSON for searched results -->
    <script type="text/javascript" src="/plugins/misc/search/tipuesearch.js"></script>

    <!-- Form plugins -->
    <script type="text/javascript" src="/plugins/forms/watermark/jquery.watermark.min.js"></script>
    <script type="text/javascript" src="/plugins/forms/elastic/jquery.elastic.js"></script>
    <script type="text/javascript" src="/plugins/forms/inputlimiter/jquery.inputlimiter.1.3.min.js"></script>
    <script type="text/javascript" src="/plugins/forms/maskedinput/jquery.maskedinput-1.3.min.js"></script>
    <script type="text/javascript" src="/plugins/forms/ibutton/jquery.ibutton.min.js"></script>
    <script type="text/javascript" src="/plugins/forms/uniform/jquery.uniform.min.js"></script>
    <script type="text/javascript" src="/plugins/forms/stepper/ui.stepper.js"></script>
<!--    <script type="text/javascript" src="/plugins/forms/color-picker/colorpicker.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/forms/timeentry/jquery.timeentry.min.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/forms/select/select2.min.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/forms/dualselect/jquery.dualListBox-1.3.min.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/forms/tiny_mce/jquery.tinymce.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/forms/smartWizzard/jquery.smartWizard-2.0.min.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/tinymce/jquery.tinymce.js"></script>-->
    
    <!-- Fix plugins -->
<!--    <script type="text/javascript" src="/plugins/fix/ios-fix/ios-orientationchange-fix.js"></script>-->

    <!-- Table plugins -->
<!--    <script type="text/javascript" src="/plugins/tables/dataTables/jquery.dataTables.min.js"></script>-->
<!--    <script type="text/javascript" src="/plugins/tables/responsive-tables/responsive-tables.js"></script> Make tables responsive -->

    <!-- Important Place before main.js  -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script>
<!--    <script type="text/javascript" src="/plugins/fix/touch-punch/jquery.ui.touch-punch.min.js"></script> Unable touch for JQueryUI -->

    <!-- Dynatree -->
    <script type="text/javascript" src="/plugins/dynatree/src/jquery.dynatree.js"></script><!-- Core js functions -->
    
    <!-- Init plugins -->
<!--    <script type="text/javascript" src="/js/main.js"></script> Core js functions -->
<!--    <script type="text/javascript" src="/js/dashboard.js"></script>-->
<!--    <script type="text/javascript" src="/js/tables.js"></script> -->
<!--    <script type="text/javascript" src="/js/forms.js"></script>-->
<!--    <script type="text/javascript" src="/js/datatable.js"></script>-->
    <script type="text/javascript" src="/js/admin.js"></script>
    
    
    
    
    
<!--	<script src="../jquery/jquery.js" type="text/javascript"></script>-->
<!--	<script src="../jquery/jquery-ui.custom.js" type="text/javascript"></script>-->
	<script src="../jquery/jquery.cookie.js" type="text/javascript"></script>

	<link href="../src/skin/ui.dynatree.css" rel="stylesheet" type="text/css">
<!--	<script src="../src/jquery.dynatree.js" type="text/javascript"></script>-->

	<!-- Start_Exclude: This block is not part of the sample code -->
	<link href="prettify.css" rel="stylesheet">
	<script src="prettify.js" type="text/javascript"></script>
	<link href="sample.css" rel="stylesheet" type="text/css">
	<script src="sample.js" type="text/javascript"></script>
	<!-- End_Exclude -->

<script type="text/javascript"><!--
$(function(){
	// --- Initialize first Dynatree -------------------------------------------
	$("#tree").dynatree({
		initAjax: {
			url: "sample-data3.json"
		},
		onLazyRead: function(node){
			// Mockup a slow reqeuest ...
			node.appendAjax({
				url: "sample-data2.json",
				debugLazyDelay: 750 // don't do thi in production code
			});
		},
//        onClick: function(node, event) {
//            if(node.getEventTargetType(event) == "null"){
//                $("#category_tree").dynatree("getActiveNode").deactivate();
//                return false;
////                var id = node.data.key.replace("node", "");
////                node.activate();
////                return false;// Prevent default processing
//            }
//        },
//        onActivate: function(node) {
//            if( node.data.href ){
//                window.open(node.data.href, '_self');
//            }
//        },
        minExpandLevel: 10,
        dnd: {
            preventVoidMoves: true, // Prevent dropping nodes 'before self', etc.
            onDragStart: function(node) {
                /** This function MUST be defined to enable dragging for the tree.
                *  Return false to cancel dragging of node.
                */
                return true;
            },
            onDragEnter: function(node, sourceNode) {
                /** sourceNode may be null for non-dynatree droppables.
                *  Return false to disallow dropping on node. In this case
                *  onDragOver and onDragLeave are not called.
                *  Return 'over', 'before, or 'after' to force a hitMode.
                *  Return ['before', 'after'] to restrict available hitModes.
                *  Any other return value will calc the hitMode from the cursor position.
                */
                // Prevent dropping a parent below another parent (only sort
                // nodes under the same parent)
                if(node.parent !== sourceNode.parent){
                return false;
                }
                // Don't allow dropping *over* a node (would create a child)
                return ["before", "after"];
            },
            onDrop: function(node, sourceNode, hitMode, ui, draggable) {
                /** This function MUST be defined to enable dropping of items on
                *  the tree.
                */
                sourceNode.move(node, hitMode);
            }
        }
        
//		dnd: {
//			preventVoidMoves: true, // Prevent dropping nodes 'before self', etc.
//			onDragStart: function(node) {
//				/** This function MUST be defined to enable dragging for the tree.
//				 *  Return false to cancel dragging of node.
//				 */
//				return true;
//			},
//			onDragEnter: function(node, sourceNode) {
//				/** sourceNode may be null for non-dynatree droppables.
//				 *  Return false to disallow dropping on node. In this case
//				 *  onDragOver and onDragLeave are not called.
//				 *  Return 'over', 'before, or 'after' to force a hitMode.
//				 *  Return ['before', 'after'] to restrict available hitModes.
//				 *  Any other return value will calc the hitMode from the cursor position.
//				 */
//				// Prevent dropping a parent below another parent (only sort
//				// nodes under the same parent)
//				if(node.parent !== sourceNode.parent){
//					return false;
//				}
//				// Don't allow dropping *over* a node (would create a child)
//				return ["before", "after"];
//			},
//			onDrop: function(node, sourceNode, hitMode, ui, draggable) {
//				/** This function MUST be defined to enable dropping of items on
//				 *  the tree.
//				 */
//				sourceNode.move(node, hitMode);
//			}
//		}
	});
});
--></script>
</head>

<body class="example">
	<h1>Example: Sort nodes using drag-and-drop</h1>
	<p class="description">
		This sample uses Dynatree's built-in drag-and-drop feature to move nodes.<br>
		- A node may only be dragged under it's original parent.<br>
		- When dropped, the node is moved to the target.
	</p>

	<div id="tree"> </div>

	<!-- Start_Exclude: This block is not part of the sample code -->
	<hr>
	<p class="sample-links  no_code">
		<a class="hideInsideFS" href="http://dynatree.googlecode.com">jquery.dynatree.js project home</a>
		<a class="hideOutsideFS" href="#">Link to this page</a>
		<a class="hideInsideFS" href="samples.html">Example Browser</a>
		<a href="#" id="codeExample">View source code</a>
	</p>
	<pre id="sourceCode" class="prettyprint" style="display:none"></pre>
	<!-- End_Exclude -->
</body>
</html>
